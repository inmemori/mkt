var Utils={getUrlParams:function(a){if(!a)return{};var c={};a.slice(a.indexOf("?")+1).split("&").map(function(b){b=b.split("=");c[b[0]]=decodeURIComponent(b[1])});return c},spreadObject:function(a,c){for(var b=Object.keys(a),d=0;d<b.length;d++)c[b[d]]=a[b[d]];return c},generateParamsString:function(a){for(var c="",b=Object.keys(a),d=0;d<b.length;d++)c=c+"&"+b[d]+"="+encodeURI(a[b[d]]);return c}},CookieManager={trackingCookie:"tracking",setCookie:function(a,c){var b=new Date;b.setTime(b.getTime()+
    5184E6);b="expires="+b.toUTCString();document.cookie=a+"="+c+";"+b+"; path=/"},getCookie:function(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?a[2]:null},deleteCookie:function(a){CookieManager.setCookie(a,"")}},TrackingApp={handlePageLinks:function(){var a=JSON.parse(App.cookie.getCookie(App.cookie.trackingCookie)),c=location.href.match(/(\.inmemori\.com\/.*\/)/g),b=!!c,d=location.href.match(/(\.inmemori\.com\/content\/)./g)?!0:!1;if(b){if(c=c[0].split("/")[1])a.mkt_source=encodeURI(c);
    $(".post-title").text()&&(a.mkt_content=encodeURI($(".post-title").text()));d&&(d=$("body").attr("class").split(/\s+/).filter(function(e){return e.startsWith("tag-hash-")}),a.mkt_campaign=2<=d.length?d[1].replace("tag-hash-",""):void 0)}var g=Utils.generateParamsString(a);$('a[href*="/welcome"]').each(function(e,f){f.href+=g})},setTracking:function(a){a||(a={});var c=CookieManager.getCookie(this.cookieName);c=c?JSON.parse(c):{};var b=Utils.spreadObject(c,{});c&&c.subrefferrer||(b.subrefferrer=document.referrer);
    b=Utils.spreadObject(a,b);App.cookie.setCookie(App.cookie.trackingCookie,JSON.stringify(b))}},App={init:function(){App.query=Utils.getUrlParams();App.tracking.setTracking(App.query);App.tracking.handlePageLinks()},cookie:CookieManager,query:Utils.getUrlParams(window.location.search),tracking:TrackingApp};App.init();